{"ast":null,"code":"import _toConsumableArray from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kacper/Pulpit/prg/TK/tk-pro/src/contexts/Alert.js\";\nimport React, { useState, createContext, useContext, useEffect } from 'react';\nimport nanoid from 'nanoid';\nvar Alert = createContext({});\nexport var Provider = function Provider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var removeExpired = function removeExpired() {\n    if (!items.length) return;\n    var expired = items.filter(function (_ref2) {\n      var expire = _ref2.expire;\n      return expire <= Date.now();\n    });\n\n    if (expired.length > 0) {\n      setItems(function (prev) {\n        return prev.filter(function (_ref3) {\n          var expire = _ref3.expire;\n          return expire >= Date.now();\n        });\n      });\n    }\n  };\n\n  var createAlert = function createAlert(value) {\n    var variant = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'primary';\n    var expire = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3000;\n    setItems(function (prev) {\n      return [].concat(_toConsumableArray(prev), [{\n        id: nanoid(),\n        children: value,\n        variant: variant,\n        expire: Date.now() + expire\n      }]);\n    });\n  };\n\n  var removeAlert = function removeAlert(id) {\n    setItems(function (prev) {\n      return _toConsumableArray(prev.filter(function (item) {\n        return item.id !== id;\n      }));\n    });\n  };\n\n  useEffect(function () {\n    var timer = setInterval(removeExpired, 200);\n    return function () {\n      clearInterval(timer);\n    };\n  }, [items]);\n  return React.createElement(Alert.Provider, {\n    value: {\n      items: items,\n      createAlert: createAlert,\n      removeAlert: removeAlert\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, children);\n};\nexport default (function () {\n  return useContext(Alert);\n});","map":{"version":3,"sources":["/home/kacper/Pulpit/prg/TK/tk-pro/src/contexts/Alert.js"],"names":["React","useState","createContext","useContext","useEffect","nanoid","Alert","Provider","children","items","setItems","removeExpired","length","expired","filter","expire","Date","now","prev","createAlert","value","variant","id","removeAlert","item","timer","setInterval","clearInterval"],"mappings":";;;AAAA,OAAOA,KAAP,IACEC,QADF,EACYC,aADZ,EAC2BC,UAD3B,EACuCC,SADvC,QAEO,OAFP;AAGA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,IAAMC,KAAK,GAAGJ,aAAa,CAAC,EAAD,CAA3B;AAEA,OAAO,IAAMK,QAAQ,GAAG,SAAXA,QAAW,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,kBACdP,QAAQ,CAAC,EAAD,CADM;AAAA;AAAA,MACjCQ,KADiC;AAAA,MAC1BC,QAD0B;;AAGxC,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1B,QAAI,CAACF,KAAK,CAACG,MAAX,EAAmB;AAEnB,QAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAAA,UAAGC,MAAH,SAAGA,MAAH;AAAA,aAAgBA,MAAM,IAAIC,IAAI,CAACC,GAAL,EAA1B;AAAA,KAAb,CAAhB;;AAEA,QAAIJ,OAAO,CAACD,MAAR,GAAiB,CAArB,EAAwB;AACtBF,MAAAA,QAAQ,CAAC,UAAAQ,IAAI;AAAA,eAAIA,IAAI,CAACJ,MAAL,CAAY;AAAA,cAAGC,MAAH,SAAGA,MAAH;AAAA,iBAAgBA,MAAM,IAAIC,IAAI,CAACC,GAAL,EAA1B;AAAA,SAAZ,CAAJ;AAAA,OAAL,CAAR;AACD;AACF,GARD;;AAUA,MAAME,WAAW,GAAG,SAAdA,WAAc,CAACC,KAAD,EAA+C;AAAA,QAAvCC,OAAuC,uEAA7B,SAA6B;AAAA,QAAlBN,MAAkB,uEAAT,IAAS;AACjEL,IAAAA,QAAQ,CAAC,UAAAQ,IAAI;AAAA,0CACRA,IADQ,IAEX;AACEI,QAAAA,EAAE,EAAEjB,MAAM,EADZ;AAEEG,QAAAA,QAAQ,EAAEY,KAFZ;AAGEC,QAAAA,OAAO,EAAPA,OAHF;AAIEN,QAAAA,MAAM,EAAEC,IAAI,CAACC,GAAL,KAAaF;AAJvB,OAFW;AAAA,KAAL,CAAR;AASD,GAVD;;AAYA,MAAMQ,WAAW,GAAG,SAAdA,WAAc,CAACD,EAAD,EAAQ;AAC1BZ,IAAAA,QAAQ,CAAC,UAAAQ,IAAI;AAAA,gCAAQA,IAAI,CAACJ,MAAL,CAAY,UAAAU,IAAI;AAAA,eAAIA,IAAI,CAACF,EAAL,KAAYA,EAAhB;AAAA,OAAhB,CAAR;AAAA,KAAL,CAAR;AACD,GAFD;;AAIAlB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMqB,KAAK,GAAGC,WAAW,CAACf,aAAD,EAAgB,GAAhB,CAAzB;AAEA,WAAO,YAAM;AACXgB,MAAAA,aAAa,CAACF,KAAD,CAAb;AACD,KAFD;AAGD,GANQ,EAMN,CAAChB,KAAD,CANM,CAAT;AAQA,SACE,oBAAC,KAAD,CAAO,QAAP;AACE,IAAA,KAAK,EAAE;AACLA,MAAAA,KAAK,EAALA,KADK;AAELU,MAAAA,WAAW,EAAXA,WAFK;AAGLI,MAAAA,WAAW,EAAXA;AAHK,KADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOGf,QAPH,CADF;AAWD,CAhDM;AAkDP,gBAAe;AAAA,SAAML,UAAU,CAACG,KAAD,CAAhB;AAAA,CAAf","sourcesContent":["import React, {\n  useState, createContext, useContext, useEffect\n} from 'react';\nimport nanoid from 'nanoid';\n\nconst Alert = createContext({});\n\nexport const Provider = ({ children }) => {\n  const [items, setItems] = useState([]);\n\n  const removeExpired = () => {\n    if (!items.length) return;\n\n    const expired = items.filter(({ expire }) => expire <= Date.now());\n\n    if (expired.length > 0) {\n      setItems(prev => prev.filter(({ expire }) => expire >= Date.now()));\n    }\n  };\n\n  const createAlert = (value, variant = 'primary', expire = 3000) => {\n    setItems(prev => [\n      ...prev,\n      {\n        id: nanoid(),\n        children: value,\n        variant,\n        expire: Date.now() + expire\n      }\n    ]);\n  };\n\n  const removeAlert = (id) => {\n    setItems(prev => [...prev.filter(item => item.id !== id)]);\n  };\n\n  useEffect(() => {\n    const timer = setInterval(removeExpired, 200);\n\n    return () => {\n      clearInterval(timer);\n    };\n  }, [items]);\n\n  return (\n    <Alert.Provider\n      value={{\n        items,\n        createAlert,\n        removeAlert\n      }}\n    >\n      {children}\n    </Alert.Provider>\n  );\n};\n\nexport default () => useContext(Alert);\n"]},"metadata":{},"sourceType":"module"}
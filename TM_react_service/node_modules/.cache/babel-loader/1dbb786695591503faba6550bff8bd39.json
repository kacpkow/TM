{"ast":null,"code":"import _regeneratorRuntime from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kacper/Pulpit/prg/TK/tk-pro/src/views/Main.js\";\nimport React, { useState, useEffect } from 'react';\nimport useTitle from '../hooks/useTitle';\nimport Loading from '../components/Loading';\nimport Button from '../components/Button';\nimport { Table, Header, Body, Row, Column } from '../components/Table';\nimport { BUTTON_SIZES, ALERT_VARIANTS, API_URL } from '../config/constants';\nimport AlertContext from '../contexts/Alert';\nimport useApi from '../hooks/useApi';\nexport default (function () {\n  useTitle('Strona główna');\n  var api = useApi();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _AlertContext = AlertContext(),\n      createAlert = _AlertContext.createAlert;\n\n  var getDataFromService =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return api.get('/api/latest/');\n\n            case 3:\n              response = _context.sent;\n              _context.next = 10;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              createAlert(\"B\\u0142\\u0105d pobierania danych z serwisu \".concat(String.fromCodePoint(0x26a0)), ALERT_VARIANTS.warning);\n              return _context.abrupt(\"return\");\n\n            case 10:\n              if (response.status === 200) {\n                setItems(response.data.images);\n              }\n\n              setIsLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function getDataFromService() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    getDataFromService();\n  }, []);\n  return React.createElement(Loading, {\n    isActive: isLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }), React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"Najnowsze pliki\"), React.createElement(Table, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(Column, {\n    as: \"th\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, \"Nazwa\"), React.createElement(Column, {\n    as: \"th\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, \"Podgl\\u0105d\"))), React.createElement(Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, items.map(function (item) {\n    return React.createElement(Row, {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, item.pic_text), React.createElement(Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, React.createElement(Button, {\n      as: \"a\",\n      size: BUTTON_SIZES.small,\n      href: API_URL + item.pic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Aktywuj\")));\n  }))));\n});","map":{"version":3,"sources":["/home/kacper/Pulpit/prg/TK/tk-pro/src/views/Main.js"],"names":["React","useState","useEffect","useTitle","Loading","Button","Table","Header","Body","Row","Column","BUTTON_SIZES","ALERT_VARIANTS","API_URL","AlertContext","useApi","api","items","setItems","isLoading","setIsLoading","createAlert","getDataFromService","get","response","String","fromCodePoint","warning","status","data","images","map","item","id","pic_text","small","pic"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport useTitle from '../hooks/useTitle';\nimport Loading from '../components/Loading';\nimport Button from '../components/Button';\nimport {\n  Table, Header, Body, Row, Column\n} from '../components/Table';\nimport { BUTTON_SIZES, ALERT_VARIANTS, API_URL } from '../config/constants';\nimport AlertContext from '../contexts/Alert';\nimport useApi from '../hooks/useApi';\n\nexport default () => {\n  useTitle('Strona główna');\n\n  const api = useApi();\n\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const { createAlert } = AlertContext();\n\n  const getDataFromService = async () => {\n    let response;\n\n    try {\n      response = await api.get('/api/latest/');\n    } catch (error) {\n      createAlert(\n        `Błąd pobierania danych z serwisu ${String.fromCodePoint(0x26a0)}`,\n        ALERT_VARIANTS.warning\n      );\n      return;\n    }\n\n    if (response.status === 200) {\n      setItems(response.data.images);\n    }\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    getDataFromService();\n  }, []);\n\n  return (\n    <Loading isActive={isLoading}>\n      <div /><h1>Najnowsze pliki</h1>\n      <Table>\n        <Header>\n          <Row>\n            <Column as=\"th\">Nazwa</Column>\n            <Column as=\"th\">Podgląd</Column>\n          </Row>\n        </Header>\n\n        <Body>\n          {items.map(item => (\n            <Row key={item.id}>\n              <Column>{item.pic_text}</Column>\n              <Column>\n                <Button as=\"a\" size={BUTTON_SIZES.small} href={API_URL + item.pic}>\n                  Aktywuj\n                </Button>\n              </Column>\n            </Row>\n          ))}\n        </Body>\n      </Table>\n    </Loading>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
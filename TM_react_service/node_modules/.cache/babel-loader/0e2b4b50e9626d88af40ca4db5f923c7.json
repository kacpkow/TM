{"ast":null,"code":"import _regeneratorRuntime from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"/home/kacper/Pulpit/prg/TK/tk-pro/src/views/SignUp.js\";\nimport React from 'react';\nimport AlertContext from '../contexts/Alert';\nimport useTitle from '../hooks/useTitle';\nimport useForm from '../hooks/useForm';\nimport Field from '../components/Field';\nimport Button from '../components/Button';\nimport { ALERT_VARIANTS } from '../config/constants';\nimport useApi from '../hooks/useApi';\nexport default (function (_ref) {\n  var history = _ref.history;\n  useTitle('Rejestracja');\n\n  var _AlertContext = AlertContext(),\n      createAlert = _AlertContext.createAlert;\n\n  var _useForm = useForm(),\n      field = _useForm.field,\n      fields = _useForm.fields,\n      setErrors = _useForm.setErrors;\n\n  var api = useApi();\n\n  var handleSubmit =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(e) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return api.post('/api/register/', fields);\n\n            case 4:\n              response = _context.sent;\n              _context.next = 12;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              createAlert(\"B\\u0142\\u0105d rejestracji, spr\\xF3buj ponownie! \".concat(String.fromCodePoint(0x26a0)), ALERT_VARIANTS.danger);\n              setErrors(_context.t0.response.data);\n              return _context.abrupt(\"return\");\n\n            case 12:\n              if (response.status === 201) {\n                createAlert('Rejestracja zakończona pomyślnie! Twoje konto oczekuje na aktywację', ALERT_VARIANTS.success);\n                history.push({\n                  pathname: '/zaloguj',\n                  state: {\n                    auth: true\n                  }\n                });\n              } else {\n                createAlert(\"B\\u0142\\u0105d rejestracji! \".concat(String.fromCodePoint(0x1f44b)), ALERT_VARIANTS.danger);\n              }\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(Field, Object.assign({\n    label: \"Nazwa u\\u017Cytkownika\"\n  }, field('username'), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  })), React.createElement(Field, Object.assign({\n    label: \"Imi\\u0119\"\n  }, field('first_name'), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  })), React.createElement(Field, Object.assign({\n    label: \"Nazwisko\"\n  }, field('last_name'), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  })), React.createElement(Field, Object.assign({\n    label: \"Adres email\"\n  }, field('email'), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  })), React.createElement(Field, Object.assign({\n    label: \"Has\\u0142o\",\n    type: \"password\"\n  }, field('password'), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  })), React.createElement(Field, Object.assign({\n    label: \"Powt\\xF3rz has\\u0142o\",\n    type: \"password\"\n  }, field('repassword'), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  })), React.createElement(Button, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Zarejestruj si\\u0119\"));\n});","map":{"version":3,"sources":["/home/kacper/Pulpit/prg/TK/tk-pro/src/views/SignUp.js"],"names":["React","AlertContext","useTitle","useForm","Field","Button","ALERT_VARIANTS","useApi","history","createAlert","field","fields","setErrors","api","handleSubmit","e","preventDefault","post","response","String","fromCodePoint","danger","data","status","success","push","pathname","state","auth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport AlertContext from '../contexts/Alert';\nimport useTitle from '../hooks/useTitle';\nimport useForm from '../hooks/useForm';\nimport Field from '../components/Field';\nimport Button from '../components/Button';\nimport { ALERT_VARIANTS } from '../config/constants';\nimport useApi from '../hooks/useApi';\n\nexport default ({ history }) => {\n  useTitle('Rejestracja');\n\n  const { createAlert } = AlertContext();\n  const { field, fields, setErrors } = useForm();\n  const api = useApi();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    let response;\n\n    try {\n      response = await api.post('/api/register/', fields);\n    } catch (error) {\n      createAlert(\n        `Błąd rejestracji, spróbuj ponownie! ${String.fromCodePoint(0x26a0)}`,\n        ALERT_VARIANTS.danger\n      );\n      setErrors(error.response.data);\n      return;\n    }\n\n    if (response.status === 201) {\n      createAlert(\n        'Rejestracja zakończona pomyślnie! Twoje konto oczekuje na aktywację',\n        ALERT_VARIANTS.success\n      );\n      history.push({\n        pathname: '/zaloguj',\n        state: {\n          auth: true\n        }\n      });\n    } else {\n      createAlert(`Błąd rejestracji! ${String.fromCodePoint(0x1f44b)}`, ALERT_VARIANTS.danger);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Field label=\"Nazwa użytkownika\" {...field('username')} />\n      <Field label=\"Imię\" {...field('first_name')} />\n      <Field label=\"Nazwisko\" {...field('last_name')} />\n      <Field label=\"Adres email\" {...field('email')} />\n      <Field label=\"Hasło\" type=\"password\" {...field('password')} />\n      <Field label=\"Powtórz hasło\" type=\"password\" {...field('repassword')} />\n\n      <Button type=\"submit\">Zarejestruj się</Button>\n    </form>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
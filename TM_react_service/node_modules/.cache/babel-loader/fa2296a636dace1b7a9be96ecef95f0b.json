{"ast":null,"code":"import _objectSpread from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _toConsumableArray from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kacper/Pulpit/prg/TK/tk-pro/src/components/SvgCanvas/index.js\";\nimport React, { useState } from 'react';\nimport nanoid from 'nanoid';\nimport _ from 'lodash';\nimport EditorContext from '../../contexts/Editor';\nimport Tools from './Tools';\nimport Canvas from './Canvas';\nimport Layers from './Layers';\nimport Options from './Options';\nimport { TEXT, RECT, CIRCLE, IMAGE } from '../../config/elements';\nimport './style.scss';\nexport default (function (_ref) {\n  var _ref$initialValue = _ref.initialValue,\n      initialValue = _ref$initialValue === void 0 ? [] : _ref$initialValue,\n      save = _ref.save;\n\n  var _useState = useState(initialValue),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      focus = _useState4[0],\n      setFocus = _useState4[1];\n\n  var addItem = function addItem(config) {\n    return setItems([].concat(_toConsumableArray(items), [_objectSpread({\n      id: nanoid()\n    }, config)]));\n  };\n\n  var deleteItem = function deleteItem(id) {\n    setItems(items.filter(function (item) {\n      return item.id !== id;\n    }));\n    setFocus(null);\n  };\n\n  var addText = function addText() {\n    return addItem(TEXT);\n  };\n\n  var addRect = function addRect() {\n    return addItem(RECT);\n  };\n\n  var addCircle = function addCircle() {\n    return addItem(CIRCLE);\n  };\n\n  var addImage = function addImage() {\n    return addItem(IMAGE);\n  };\n\n  var updateItem = function updateItem(id, opts) {\n    setItems(function (prev) {\n      return prev.map(function (item) {\n        if (item.id === id) {\n          return _.merge({}, item, opts);\n        }\n\n        return item;\n      });\n    });\n  };\n\n  var saveData = function saveData() {\n    if (save) {\n      save(items);\n    }\n  };\n\n  return React.createElement(EditorContext.Provider, {\n    value: {\n      items: items,\n      deleteItem: deleteItem,\n      addText: addText,\n      addRect: addRect,\n      addCircle: addCircle,\n      addImage: addImage,\n      updateItem: updateItem,\n      saveData: saveData,\n      focus: focus,\n      setFocus: setFocus\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"editor\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(Tools, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), React.createElement(Canvas, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(Layers, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), React.createElement(Options, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })));\n});","map":{"version":3,"sources":["/home/kacper/Pulpit/prg/TK/tk-pro/src/components/SvgCanvas/index.js"],"names":["React","useState","nanoid","_","EditorContext","Tools","Canvas","Layers","Options","TEXT","RECT","CIRCLE","IMAGE","initialValue","save","items","setItems","focus","setFocus","addItem","config","id","deleteItem","filter","item","addText","addRect","addCircle","addImage","updateItem","opts","prev","map","merge","saveData"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport nanoid from 'nanoid';\nimport _ from 'lodash';\nimport EditorContext from '../../contexts/Editor';\nimport Tools from './Tools';\nimport Canvas from './Canvas';\nimport Layers from './Layers';\nimport Options from './Options';\nimport {\n  TEXT, RECT, CIRCLE, IMAGE\n} from '../../config/elements';\n\nimport './style.scss';\n\nexport default ({ initialValue = [], save }) => {\n  const [items, setItems] = useState(initialValue);\n  const [focus, setFocus] = useState(null);\n\n  const addItem = config => setItems([\n    ...items,\n    {\n      id: nanoid(),\n      ...config\n    }\n  ]);\n\n  const deleteItem = (id) => {\n    setItems(items.filter(item => item.id !== id));\n    setFocus(null);\n  };\n\n  const addText = () => addItem(TEXT);\n  const addRect = () => addItem(RECT);\n  const addCircle = () => addItem(CIRCLE);\n  const addImage = () => addItem(IMAGE);\n\n  const updateItem = (id, opts) => {\n    setItems(prev => prev.map((item) => {\n      if (item.id === id) {\n        return _.merge({}, item, opts);\n      }\n\n      return item;\n    }));\n  };\n\n  const saveData = () => {\n    if (save) {\n      save(items);\n    }\n  };\n\n  return (\n    <EditorContext.Provider\n      value={{\n        items,\n        deleteItem,\n        addText,\n        addRect,\n        addCircle,\n        addImage,\n        updateItem,\n        saveData,\n        focus,\n        setFocus\n      }}\n    >\n      <div className=\"editor\">\n        <Tools />\n        <Canvas />\n        <Layers />\n        <Options />\n      </div>\n    </EditorContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/kacper/Pulpit/prg/TK/tk-pro/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/kacper/Pulpit/prg/TK/tk-pro/src/views/Upload.js\";\nimport React, { useState, useEffect } from 'react';\nimport AlertContext from '../contexts/Alert';\nimport useTitle from '../hooks/useTitle';\nimport Loading from '../components/Loading';\nimport Button from '../components/Button';\nimport Separator from '../components/Separator';\nimport UploadModal from './partials/UploadModal';\nimport DeleteModal from './partials/DeleteModal';\nimport { Table, Header, Body, Row, Column } from '../components/Table';\nimport useApi from '../hooks/useApi';\nimport { ALERT_VARIANTS, API_URL } from '../config/constants';\nexport default (function () {\n  useTitle('Manager plików');\n  var api = useApi();\n\n  var _AlertContext = AlertContext(),\n      createAlert = _AlertContext.createAlert;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      items = _useState2[0],\n      setItems = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isLoading = _useState4[0],\n      setIsLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isUploadModal = _useState6[0],\n      setIsUploadModal = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isDeleteModal = _useState8[0],\n      setIsDeleteModal = _useState8[1];\n\n  var fetchList =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setIsLoading(true);\n              _context.prev = 1;\n              _context.next = 4;\n              return api.get('/api/images/');\n\n            case 4:\n              response = _context.sent;\n              _context.next = 12;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](1);\n              createAlert(\"B\\u0142\\u0105d podczas \\u0142adowania plik\\xF3w \".concat(String.fromCodePoint(0x26a0)), ALERT_VARIANTS.warning);\n              setIsLoading(false);\n              return _context.abrupt(\"return\");\n\n            case 12:\n              setItems(response.data.images);\n              setIsLoading(false);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 7]]);\n    }));\n\n    return function fetchList() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var openUploadModal = function openUploadModal() {\n    return setIsUploadModal(true);\n  };\n\n  var closeUploadModal = function closeUploadModal() {\n    return setIsUploadModal(false);\n  };\n\n  var openDeleteModal = function openDeleteModal(id) {\n    return setIsDeleteModal(id);\n  };\n\n  var closeDeleteModal = function closeDeleteModal() {\n    return setIsDeleteModal(false);\n  };\n\n  useEffect(function () {\n    fetchList();\n  }, []);\n  return React.createElement(Loading, {\n    isActive: isLoading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(Button, {\n    onClick: openUploadModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, \"Dodaj plik\"), React.createElement(Separator, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }), React.createElement(UploadModal, {\n    isOpen: isUploadModal,\n    onClose: closeUploadModal,\n    onDone: function onDone() {\n      fetchList();\n      closeUploadModal();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }), React.createElement(DeleteModal, {\n    id: isDeleteModal,\n    isOpen: isDeleteModal,\n    onClose: closeDeleteModal,\n    onDone: function onDone() {\n      fetchList();\n      closeDeleteModal();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(Table, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(Header, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Column, {\n    as: \"th\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"Nazwa\"), React.createElement(Column, {\n    as: \"th\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }))), React.createElement(Body, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, items.map(function (item) {\n    return React.createElement(Row, {\n      key: item.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      href: API_URL + item.pic,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, item.pic_text)), React.createElement(Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: function onClick() {\n        return openDeleteModal(item.id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Usu\\u0144\")));\n  }))));\n});","map":{"version":3,"sources":["/home/kacper/Pulpit/prg/TK/tk-pro/src/views/Upload.js"],"names":["React","useState","useEffect","AlertContext","useTitle","Loading","Button","Separator","UploadModal","DeleteModal","Table","Header","Body","Row","Column","useApi","ALERT_VARIANTS","API_URL","api","createAlert","items","setItems","isLoading","setIsLoading","isUploadModal","setIsUploadModal","isDeleteModal","setIsDeleteModal","fetchList","get","response","String","fromCodePoint","warning","data","images","openUploadModal","closeUploadModal","openDeleteModal","id","closeDeleteModal","map","item","pic","pic_text"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport AlertContext from '../contexts/Alert';\nimport useTitle from '../hooks/useTitle';\nimport Loading from '../components/Loading';\nimport Button from '../components/Button';\nimport Separator from '../components/Separator';\nimport UploadModal from './partials/UploadModal';\nimport DeleteModal from './partials/DeleteModal';\nimport {\n  Table, Header, Body, Row, Column\n} from '../components/Table';\nimport useApi from '../hooks/useApi';\nimport { ALERT_VARIANTS, API_URL } from '../config/constants';\n\nexport default () => {\n  useTitle('Manager plików');\n\n  const api = useApi();\n  const { createAlert } = AlertContext();\n\n  const [items, setItems] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isUploadModal, setIsUploadModal] = useState(false);\n  const [isDeleteModal, setIsDeleteModal] = useState(false);\n\n  const fetchList = async () => {\n    setIsLoading(true);\n\n    let response;\n\n    try {\n      response = await api.get('/api/images/');\n    } catch (ex) {\n      createAlert(\n        `Błąd podczas ładowania plików ${String.fromCodePoint(0x26a0)}`,\n        ALERT_VARIANTS.warning\n      );\n\n      setIsLoading(false);\n      return;\n    }\n\n    setItems(response.data.images);\n    setIsLoading(false);\n  };\n\n  const openUploadModal = () => setIsUploadModal(true);\n  const closeUploadModal = () => setIsUploadModal(false);\n\n  const openDeleteModal = id => setIsDeleteModal(id);\n  const closeDeleteModal = () => setIsDeleteModal(false);\n\n  useEffect(() => {\n    fetchList();\n  }, []);\n\n  return (\n    <Loading isActive={isLoading}>\n      <Button onClick={openUploadModal}>Dodaj plik</Button>\n\n      <Separator />\n\n      <UploadModal\n        isOpen={isUploadModal}\n        onClose={closeUploadModal}\n        onDone={() => {\n          fetchList();\n          closeUploadModal();\n        }}\n      />\n\n      <DeleteModal\n        id={isDeleteModal}\n        isOpen={isDeleteModal}\n        onClose={closeDeleteModal}\n        onDone={() => {\n          fetchList();\n          closeDeleteModal();\n        }}\n      />\n\n      <Table>\n        <Header>\n          <Row>\n            <Column as=\"th\">Nazwa</Column>\n            <Column as=\"th\" />\n          </Row>\n        </Header>\n\n        <Body>\n          {items.map(item => (\n            <Row key={item.id}>\n              <Column>\n                <a target=\"_blank\" rel=\"noopener noreferrer\" href={API_URL + item.pic}>\n                  {item.pic_text}\n                </a>\n              </Column>\n\n              <Column>\n                <Button onClick={() => openDeleteModal(item.id)}>\n                  Usuń\n                </Button>\n              </Column>\n            </Row>\n          ))}\n        </Body>\n      </Table>\n    </Loading>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}